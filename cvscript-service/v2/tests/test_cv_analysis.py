import pytest

cv_object = {
    "id": 248,
    "pk": 248,
    "name": "Abiola Oyeniyi (Frontend Engineer) Resume",
    "level": "Experienced",
    "headline": "Frontend Developer",
    "modified": 1555021110277.038,
    "projects": {
        "body": [
            {
                "url": "",
                "date": {
                    "end_date": "Present",
                    "is_current": True,
                    "start_date": "2018-12",
                },
                "year": "",
                "title": "Careerlyft Agent Portal",
                "end_date": "Present",
                "is_current": True,
                "projectURL": "https://agent-staging.careerlyft.com",
                "start_date": "2018-12",
                "company_name": "Careerlft",
                "projectAchievement": "<p>This is the staging environment for Careerlyft's Agents. It provides assistance with bulk creation of resumes for users.</p>",
            },
            {
                "url": "",
                "date": {
                    "end_date": "2019-3",
                    "is_current": False,
                    "start_date": "2018-11",
                },
                "year": "",
                "title": "Careerlyft Marketing Pages",
                "end_date": "2019-3",
                "is_current": False,
                "projectURL": "https://web2.careerlyft.com/agent",
                "start_date": "2018-11",
                "company_name": "Careerlyft",
                "projectAchievement": "<p>The marketing pages for agents looking to create resume for users in bulk.</p><p>This was built with NextJS and hosted on Netlify.</p>",
            },
        ],
        "heading": "Projects",
    },
    "training": [],
    "completed": False,
    "education": {
        "body": [
            {
                "cgpa": "4.5",
                "course": "Systems Engineering",
                "degree": "BSc",
                "gradePoint": "5.00",
                "isCollapsed": False,
                "school_name": "University of Lagos",
                "degree_level": "First Class",
                "completion_year": "2013",
            }
        ],
        "heading": "Education",
    },
    "languages": {
        "body": [{"language": "English", "proficiency": "Fluent"}],
        "heading": "Languages",
    },
    "thumbnail": "http://res.cloudinary.com/careerlyft/image/upload/h_413,w_300/lrc86qtkahjxpkmnzmuu",
    "achievement": {"body": ""},
    "customer_id": 6,
    "last_edited": 1555021110277.038,
    "job_category": None,
    "job_position": "Software Engineer",
    "selectedFont": "Noto Serif, serif",
    "customer_name": "Abiola Oyeniyi",
    "personal_info": {
        "id": 6,
        "email": "gbozee@gmail.com",
        "phone": "+2347035209976",
        "address": "Lagos, Nigeria",
        "country": "Nigeria",
        "website": "linkedin.com/in/oyeniyi-abiola-8163a433/",
        "headline": "Frontend Developer",
        "location": {"address": "Lagos, Nigeria", "country": "Nigeria"},
        "last_name": "Oyeniyi",
        "photo_url": "",
        "first_name": "Abiola",
        "phone_number": {"number": "+2347035209976"},
        "social_link_url": "https://linkedin.com/in/oyeniyi-abiola-8163a433/",
    },
    "selectedColor": "#1d824c",
    "certifications": {"body": [], "heading": "Certifications"},
    "industry_skills": {
        "body": [
            "Test Driven Development",
            "Software Debugging",
            "API Design",
            "Design Systems",
        ],
        "heading": "Industry Expertise",
    },
    "software_skills": {
        "body": [
            {
                "groups": {
                    "Backend Development": [
                        "Django",
                        "Flask",
                        "PostgreSQL",
                        "Celery",
                        "NodeJS",
                    ],
                    "Frontend Development": [
                        "VueJS",
                        "ReactJS",
                        "HTML & CSS",
                        "Redux",
                        "Webpack",
                    ],
                    "Programming Languages": ["Python", "JavaScript", "Typescript"],
                    "Development Operations / Source Control": [
                        "Git",
                        "Docker",
                        "Continous Integration",
                    ],
                },
                "softwares": [
                    "Django",
                    "Flask",
                    "PostgreSQL",
                    "Celery",
                    "NodeJS",
                    "VueJS",
                    "ReactJS",
                    "HTML & CSS",
                    "Redux",
                    "Webpack",
                    "Python",
                    "JavaScript",
                    "Typescript",
                    "Git",
                    "Docker",
                    "Continous Integration",
                ],
            }
        ],
        "heading": "Software Skills",
    },
    "work_experience": {
        "body": [
            {
                "endDate": "2019-3",
                "website": "https://www.careerlyft.com",
                "position": "Fullstack Software Developer",
                "startDate": "2018-3",
                "highlights": "<ul><li>Planned and designed front-end architecture for scalability and maintainability.</li><li>Fixed bugs on existing websites and implemented enhancements that significantly improved web functionality and speed.</li><li>Refactored the front end code-base, in order to speed up release times, when fixing bugs or deploying new features</li><li>Implemented a mono repository architecture for the different apps used in building the front end.</li><li>Designed reusable user interface components in React and JavaScript ES6; managed application state using Redux.</li><li>Contributed in the development and hosting of the design system of the web application. Hosted at https://careerlyft-chakra.now.sh</li><li>Built the PDF generation microservice, used by the applicaiton, in NodeJS, using Puppeteer and hosted it on Zeit's <strong>Now.sh</strong></li></ul>",
                "isCollapsed": True,
                "company_name": "Careerlyft",
                "website_link": "https://www.careerlyft.com",
                "currentlyWorking": True,
            },
            {
                "endDate": "2019-3",
                "website": "https://www.tuteria.com",
                "position": "Co-Founder, Lead Developer",
                "startDate": "2014-9",
                "highlights": "<ul><li>Built the payment processing platform, used in handling payment to tutors, which paid out over 1000 tutors in the last 3 years.</li><li>Mentored software engineers in developing projects using best practices.</li><li>Wrote and maintained the initial version of the back-end code base for 2 years before getting new team members.</li><li>Upgraded the underlying payment data layer to support group lessons, without introducing a breaking change or regression.&nbsp;</li><li>Rebuilt the application process, involved in placing a parent request, on the website.</li><li>Built a microservice, responsible for determining what the pricing factors should be based on the request parameters, in NodeJS. </li></ul>",
                "isCollapsed": True,
                "company_name": "Tuteria Limited",
                "website_link": "https://www.tuteria.com/s/hometutoring",
                "currentlyWorking": True,
            },
        ],
        "heading": "Work Experience",
    },
    "selectedTemplate": "bland 02",
    "mission_statement": {
        "body": "<p>Passionate Front-end Developer with 5+ years experience developing user interface components and implementing them in React.js. Looking to join your development team where my skills will be utilized in the design of scalable, data-driven, modular products that can be adapted to meet changing business requirements.</p>",
        "heading": "Professional Summary",
    },
}


# def test_analyze_work_experience():
#     cv_script_analysis = analyze_cv_script(cv_object)
#     assert cv_script_analysis["keywords"] == {
#         "work_experience": [],
#         "projects": [],
#         "publications": [],
#         "volunteering": [],
#     }
#     assert cv_script_analysis["technologies"] == {"software_skills": []}

#     assert cv_script_analysis["industry_knowledge"] == {
#         "work_experience": [],
#         "projects": [],
#         "industry_skills": [],
#     }

#     assert cv_script_analysis["online_presence"] == {
#         "personal_info": [],
#         "publications": [],
#         "projects": [],
#     }

#     assert cv_script_analysis["outdated_tech"] == {"software_skills": []}

#     assert cv_script_analysis["file_name"] == {"name": []}

#     assert cv_script_analysis["section_check"] == {"job_category": []}
#     assert cv_script_analysis["no_of_pages"] == {"career_level": []}
#     assert cv_script_analysis["personal_pronoun"] == {
#         "work_experience": [],
#         "mission_statement": [],
#         "projects": [],
#         "volunteering": [],
#         "achievements": [],
#     }

